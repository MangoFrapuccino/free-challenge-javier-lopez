<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Javier Lopez</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #111;
  }
  canvas {
    display: block;
    position: relative; 
    z-index: 2;   
  }
  #logo {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* centra exactamente */
    width: 900px; /* ajusta tamaño */
    pointer-events: none; /* para que los clicks pasen al canvas */
    z-index: 1;
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<img src="images/logo.png" id="logo" />

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Jugadores con animación
const players = [
  { 
    x: 100, y: 100, vx: 8, vy: 5, size: 100, label: "Login", url: "login.html",
    frames: ["#ff6666", "#ff9999", "#ffcccc"], frameIndex: 0, frameTimer: 0 
  },
  { 
    x: 300, y: 200, vx: -6, vy: 7, size: 100, label: "Register", url: "register.html",
    frames: ["#6666ff", "#9999ff", "#ccccff"], frameIndex: 0, frameTimer: 0
  }
];

let startTime = Date.now();

function drawPlaceholder(p) {
  ctx.beginPath();
  ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
  ctx.fillStyle = p.frames[p.frameIndex];
  ctx.fill();
  ctx.fillStyle = "#fff";
  ctx.font = `bold ${Math.floor(p.size / 2)}px sans-serif`;
  ctx.textAlign = "center";
  ctx.fillText(p.label, p.x, p.y + 5);
}

function update(delta) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  let elapsed = (Date.now() - startTime) / 1000;

  for (let p of players) {
    // Animación: cambiar frame cada 100 ms
    p.frameTimer += delta;
    if (p.frameTimer > 100) {
      p.frameIndex = (p.frameIndex + 1) % p.frames.length;
      p.frameTimer = 0;
    }

    // Fatiga después de 10s
    if (elapsed > 10) {
      p.vx *= 0.99;
      p.vy *= 0.99;
    }

    p.x += p.vx;
    p.y += p.vy;

    if (p.x - p.size < 0 || p.x + p.size > canvas.width) p.vx *= -1;
    if (p.y - p.size < 0 || p.y + p.size > canvas.height) p.vy *= -1;

    drawPlaceholder(p);
  }

  requestAnimationFrame(loop);
}

let lastTime = performance.now();
function loop(time) {
  let delta = time - lastTime;
  lastTime = time;
  update(delta);
}

// Clic sobre jugador
canvas.addEventListener("click", (e) => {
  const rect = canvas.getBoundingClientRect();
  const mouseX = e.clientX - rect.left;
  const mouseY = e.clientY - rect.top;

  for (let p of players) {
    const dx = mouseX - p.x;
    const dy = mouseY - p.y;
    const distance = Math.sqrt(dx * dx + dy * dy);

    if (distance <= p.size) {
      window.location.href = p.url;
      break;
    }
  }
});

loop();
</script>
</body>
</html>
