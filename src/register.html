<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>REGISTER</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      background: #a349a3;
      font-family: Arial, sans-serif;
      color: white;
      position: relative;
      overflow-x: hidden;
    }

    .form-container {
      position: relative;
      width: 110%;
      height: 100vh;
    }

    /* Inputs posicionables */
    input.nombre {
      position: absolute;
      top: 50px;
      left: 1440px;
      width: 330px;
      padding: 30px;
    }

    input.contraseña {
      position: absolute;
      top: 78px;
      left: 70px;
      width: 400px;
      height: 50px;
    }

    #date-picker {
      position: absolute;
      top: 350px;
      left: 570px;
      width: 400px;
      z-index: 10;
    }

    .years, .months, .days {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      max-height: 150px;
      overflow-y: auto;
    }

    .option {
      padding: 4px 8px;
      border-radius: 5px;
      cursor: pointer;
      text-align: center;
      background: black;
    }

    .option:hover {
      background: white;
      transform: scale(2.0);
    }

    .hidden {
      display: none;
    }

    #selected-date {
      position: absolute;
      top: 350px;
      left: 980px;
      font-weight: bold;
      font-size: 55px;
      color: #4caf50;
      z-index: 10;
    }

    .acertijo {
      position: absolute;
      top: 500px;
      left: 900px;
      max-width: 300px;
      background: rgba(0,0,0,0.8);
      padding: 15px 20px;
      border-radius: 20px;
      font-size: 24px;
      color: yellow;
      line-height: 1.4;
      z-index: 10;
    }

    .acertijo::after {
      content: "";
      position: absolute;
      bottom: -20px;
      left: 30px;
      border-width: 10px;
      border-style: solid;
      border-color: rgba(0,0,0,0.8) transparent transparent transparent;
      z-index: 10;
    }

    .acertijo.fade {
      animation: fadein 0.5s;
    }

    @keyframes fadein {
      from {opacity:0;}
      to {opacity:1;}
    }

    #name-selector {
      position: absolute;
      top: 130px;
      left: 1520px;
      width: 200px;
      background: rgba(0, 255, 55, 1);
      padding: 10px;
      border-radius: 0px;
    }

    .letters, .names {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      max-height: 150px;
      overflow-y: auto;
    }

    .letter-option, .name-option {
      font-family: "Comic Sans MS", "Comic Sans", cursive;
      padding: 4px 8px;
      border-radius: 0px;
      cursor: pointer;
      text-align: center;
      background: #999999;
    }

    .letter-option:hover, .name-option:hover {
      background: #666;
    }

    .verification-icon {
      position: absolute;
      right: 290px;
      top: 9%;
      transform: translateY(-50%);
      font-size: 24px;
    }

    #name-error {
      position: absolute;
      top: 100px; 
      left: 1440px;
      color: red;
      font-family: "Comic Sans MS", cursive;
      font-size: 18px;
      display: none;
    }

    #create-button {
      font-family: "Papyrus", serif;
      position: absolute;
      top: 450px;
      left: 70px;
      width: 400px;
      height: 80px;
      background-color: red;
      color: white;
      font-size: 24px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
    }

    #create-button:hover {
      transform: scale(1.1);
      box-shadow: 0 0 10px 5px rgba(255, 0, 0, 0.5);
    }

    #floating-image {
      position: absolute; 
      z-index: 9999;
      pointer-events: none;
      top: 570px;  
      left: 1950px;
      transform: scale(1.5); /* Escala para la imagen existente */
    }

    #floating-image img {
      width: auto;
      height: auto;
      max-width: 200px;
      max-height: 200px;
    }

    #back-button {
      position: absolute;
      top: 200px;
      left: 1000px;
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-family: Arial, sans-serif;
      font-size: 16px;
      transition: all 0.3s;
      z-index: 10000;
    }

    #back-button:hover {
      background-color: #45a049;
      transform: scale(1.05);
    }

    /* Estilos para las 10 imágenes adicionales */
    /* Puedes modificar los valores de top, left y transform para posicionar y escalar cada imagen */
    .static-image {
      position: absolute;
      z-index: 10;
    }
    
    .static-image img {
      width: auto;
      height: auto;
      max-width: 1000px; /* Límite máximo de ancho */
      max-height: 1000px; /* Límite máximo de alto */
    }
    
    #image1 {
      top: 390px;
      left: 120px;
      transform: scale(1);
    }
    
    #image2 {
      top: 32px;
      left: 100px;
      transform: scale(1.1);
    }
    
    #image3 {
      top: 10px;
      left: 1450px;
      transform: scale(1);
    }
    
    #image4 {
      top: 250px;
      left: 660px;
      transform: scale(1);
    }
    
    #image5 {
      top: 550px;
      left: 700px;
      transform: scale(1);
      z-index: 1;
    }
    
    #image6 {
      top: 540px;
      left: 1330px;
      transform: scale(1);
    }
    
    #image7 {
      top: 550px;
      left: 100px;
      transform: scale(1);
      z-index: 1;
    }
    
    #image8 {
      top: 30px;
      left: 1220px;
      transform: scale(1.0);
    }
    
    #image9 {
      top: 130px;
      left: 750px;
      transform: scale(1);
    }
    
    #image10 {
      top: 180px;
      left: 200px;
      transform: scale(1);
    }

    .bloque-blanco {
      position: absolute;
      background-color: white;
      z-index: 1;
      top: 340px;
      left: 560px;
      width: 1100px;
      height: 160px;
}
  </style>
</head>
<body>
    <audio id="background-audio" autoplay>
      <source src="./audio/Gong Sound Effect.mp3" type="audio/mpeg">
      Tu navegador no soporta el elemento de audio.
    </audio>
    <audio id="bg-music" loop>
      <source src="./audio/Green Wizard Gnome Song 1 Minute and 24 seconds!.mp3" type="audio/mpeg">
    </audio>
    <div id="image1" class="static-image">
      <img src="./images/register.PNG" alt="Imagen 1">
    </div>
    <div id="image2" class="static-image">
      <img src="./images/contraseña.PNG" alt="Imagen 2">
    </div>
    <div id="image3" class="static-image">
      <img src="./images/nombreyapelido.PNG" alt="Imagen 3">
    </div>
    <div id="image4" class="static-image">
      <img src="./images/fechadenacimiento.PNG" alt="Imagen 4">
    </div>
    <div id="image5" class="static-image">
      <img src="./images/creaturaazul.PNG" alt="Imagen 5">
    </div>
    <div id="image6" class="static-image">
      <img src="./images/duendemagico.PNG" alt="Imagen 6">
    </div>
    <div id="image7" class="static-image">
      <img src="./images/magomagico.PNG" alt="Imagen 7">
    </div>
    <div id="image8" class="static-image">
      <img src="./images/flecha1.PNG" alt="Imagen 8">
    </div>
    <div id="image9" class="static-image">
      <img src="./images/flecha2.PNG" alt="Imagen 9">
    </div>
    <div id="image10" class="static-image">
      <img src="./images/flecha3.PNG" alt="Imagen 10">
    </div>
    <div class="bloque-blanco"></div>
    
    <div class="form-container">
      <div id="floating-image">
        <img src="./images/hombreoculto.png" alt="Imagen flotante">
      </div>
      <h2 style="position:absolute; top:50px; left:150px;"></h2>
      <form>
        <input type="text" placeholder="responde nombre y apellido" required class="nombre" id="name-input" readonly>
        <span id="verification-icon" class="verification-icon"></span>
        <div id="name-error">SOLO PUEDE SER USADO POR JAVIER</div>
        <input type="password" placeholder="Responde el acertijo" required class="contraseña">
        
        <label style="position:absolute; top:320px; left:150px;"></label>
        <div id="date-picker">
          <div id="year-selector" class="years"></div>
          <div id="month-selector" class="months hidden"></div>
          <div id="day-selector" class="days hidden"></div>
        </div>
        <button type="button" id="create-button">CREAR</button>
        <button id="back-button">VOLVER</button>
        <input type="hidden" id="fechaNacimiento" name="fechaNacimiento">
        <div id="selected-date"></div>
        <div id="acertijo" class="acertijo hidden"></div>
      </form>
      <div id="name-selector" class="hidden">
        <div id="letter-selector" class="letters"></div>
        <div id="name-list" class="names hidden"></div>
      </div>
    </div>

  <script>
  const yearSelector = document.getElementById("year-selector");
  const monthSelector = document.getElementById("month-selector");
  const daySelector = document.getElementById("day-selector");
  const fechaInput = document.getElementById("fechaNacimiento");
  const selectedDateDiv = document.getElementById("selected-date");
  const acertijoDiv = document.getElementById("acertijo");
  const inputPass = document.querySelector("input.contraseña");
  const nameInput = document.getElementById("name-input");
  const nameSelector = document.getElementById("name-selector");
  const letterSelector = document.getElementById("letter-selector");
  const nameList = document.getElementById("name-list");

  let data = {};
  let selectedYear = null;
  let selectedMonth = null;
  let acertijos = [];
  let nombresData = {};

  // Cargar JSON de años
  fetch("años.json")
    .then(response => response.json())
    .then(json => {
      data = json;
      showYears();
    });

  // Cargar JSON de acertijos
  fetch("acertijos.json")
    .then(response => response.json())
    .then(json => { acertijos = json; });

  // Cargar JSON nombres
  fetch("nombres.json")
    .then(response => response.json())
    .then(json => { nombresData = json; });

  document.getElementById('back-button').addEventListener('click', function() {
    window.location.href = 'index.html';
  });

  document.addEventListener('DOMContentLoaded', function() {
    const effectAudio = document.getElementById('background-audio');
    const bgMusic = document.getElementById('bg-music');
    effectAudio.volume = 0.5;
    bgMusic.volume = 0.3; 
    effectAudio.play().catch(e => {
        console.log("Autoplay bloqueado. Se reproducirá al primer clic.");
        document.body.addEventListener('click', () => effectAudio.play(), { once: true });
    });
    
    effectAudio.addEventListener('ended', () => {
        bgMusic.play().catch(e => console.log("Error al iniciar música:", e));
    });
  });

  const createButton = document.getElementById('create-button');

  function isFormComplete() {
    const isNameFilled = nameInput.value.trim() !== '';
    const isPasswordFilled = inputPass.value.trim() !== '';
    const isDateFilled = fechaInput.value.trim() !== '';
    return isNameFilled && isPasswordFilled && isDateFilled;
  }

  function showYears() {
    yearSelector.innerHTML = "";
    Object.keys(data).forEach(year => {
      const div = document.createElement("div");
      div.classList.add("option");
      div.textContent = year;
      div.onclick = () => {
        selectedYear = year;
        showMonths(year);
      };
      yearSelector.appendChild(div);
    });
  }

  function showMonths(year) {
    monthSelector.innerHTML = "";
    daySelector.classList.add("hidden");
    selectedMonth = null;

    Object.keys(data[year]).forEach(month => {
      const div = document.createElement("div");
      div.classList.add("option");
      div.textContent = month;
      div.onclick = () => {
        selectedMonth = month;
        showDays(year, month);
      };
      monthSelector.appendChild(div);
    });

    monthSelector.classList.remove("hidden");
  }

  function showDays(year, month) {
    daySelector.innerHTML = "";
    const days = data[year][month];

    for (let d = 1; d <= days; d++) {
      const div = document.createElement("div");
      div.classList.add("option");
      div.textContent = month;
      div.onclick = () => {
        const fecha = `${String(d).padStart(2,"0")}/${String(Object.keys(data[year]).indexOf(month)+1).padStart(2,"0")}/${year}`;
        fechaInput.value = fecha;
        selectedDateDiv.textContent = "Seleccionaste: " + fecha;

        monthSelector.classList.add("hidden");
        daySelector.classList.add("hidden");      
      };
      daySelector.appendChild(div);
    }
    daySelector.classList.remove("hidden");
  }

  function mostrarAcertijo() {
    if(acertijos.length === 0) return;
    const index = Math.floor(Math.random() * acertijos.length);
    const acertijo = acertijos[index];
    acertijoDiv.textContent = acertijo.pregunta;
    acertijoDiv.classList.remove("hidden");
    acertijoDiv.classList.add("fade");

    setTimeout(() => {
      acertijoDiv.classList.remove("fade");
    }, 500);
  }

  inputPass.addEventListener("click", mostrarAcertijo);

  nameInput.addEventListener('focus', function() {
      nameSelector.classList.remove('hidden');
      showLetters();
    });

  function showLetters() {
      letterSelector.innerHTML = '';
      nameList.classList.add('hidden');

      const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ12'.split('');

      letters.forEach(letter => {
        const div = document.createElement('div');
        div.classList.add('letter-option');
        div.textContent = letter;
        div.onclick = () => {
          if (isNaN(letter)) {
            showNames(letter);
          } else {
            nameInput.value = letter;
            nameSelector.classList.add('hidden');
          }
        };
        letterSelector.appendChild(div);
      });
    }

  function showNames(letter) {
    nameList.innerHTML = '';
    const names = nombresData[letter] || ['No hay nombres disponibles'];
    names.forEach(name => {
      const div = document.createElement('div');
      div.classList.add('name-option');
      div.textContent = name;
      div.onclick = () => {
        nameInput.value = name;
        
        const verificationIcon = document.getElementById('verification-icon');
        const nameError = document.getElementById('name-error');
        
        if (name.toUpperCase() === 'JAVIER') {
            verificationIcon.innerHTML = '❌';
            verificationIcon.style.color = 'red';
            nameError.style.display = 'block';
        } else {
            verificationIcon.innerHTML = '✅';
            verificationIcon.style.color = '#4CAF50';
            nameError.style.display = 'none';
        }
        nameSelector.classList.add('hidden');
      };
      nameList.appendChild(div);
    });

    nameList.classList.remove('hidden');
  }

  createButton.addEventListener('click', function() {
    if (isFormComplete()) {
      localStorage.setItem("registrado", "true");
      window.location.href = 'login.html';
    } else {
      const errorMsg = document.createElement('div');
      errorMsg.textContent = 'RELLENA TODOS LOS CAMPOS😡';
      errorMsg.style.position = 'absolute';
      errorMsg.style.top = '550px';
      errorMsg.style.left = '70px';
      errorMsg.style.color = 'red';
      errorMsg.style.fontSize = '24px';
      errorMsg.style.fontWeight = 'bold';
      errorMsg.style.zIndex = '10';
      errorMsg.style.fontFamily = '"Comic Sans MS", cursive';
      errorMsg.style.textShadow = '0 0 5px white';
      document.querySelector('.form-container').appendChild(errorMsg);
      setTimeout(() => {
        errorMsg.remove();
      }, 2000);
    }
  });
  </script>
</body>
</html>